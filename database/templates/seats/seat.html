
{% load static %}
{% include "base/header.html" %}
<script>
    function openNav() {
        document.getElementById("mobileMenu").style.width = "300px";
    }

    function closeNav() {
        document.getElementById("mobileMenu").style.width = "0";
    }
</script>

    <!-- Main Header End -->
    


<style>
    /* width */
    .list-seat::-webkit-scrollbar:horizontal {
        width: 5px;
    }

    /* Track */
    .list-seat::-webkit-scrollbar-track:horizontal {
        background: #f1f1f1;
    }

    /* Handle */
    .list-seat::-webkit-scrollbar-thumb:horizontal {
        background: #333;
    }

    /* Handle on hover */
    .list-seat::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    .list-seat .android-font {
        font-size: 0.8em !important;
    }

    .list-seat .windows-font {
        font-size: 0.9em !important;
    }

    .list-seat p {
        font-weight: bold;
    }

    .note-color {
        width: 100%;
    }

        .note-color .note-col {
            width: 48%;
            padding: 2px;
            float: left;
            text-align: left;
        }

            .note-color .note-col p {
                float: left;
                padding: 3px;
                line-height: 15px;
                color: #333;
                /**/
            }

    .current_select {
        background: url({% static 'seat/img/seat-selected.png' %})  !important;
        background-size: contain !important;
        color: #fff !important;
        font-weight: bold;
    }

    .screen-thumb {
        width: 100%;
        max-width: 692px;
        margin: 0 auto 30px;
        padding-top: 20px;
    }

    h4.screen {
        font-size: 28px;
        margin: 0px auto 15px;
        position: relative;
        text-align: center;
        max-width: 350px;
        font-weight: 600;
        text-transform: uppercase;
        padding: 10px;
        color: #fff;
    }
</style>
<section class="filmoja-breadcrumb-area section_15 container" style="background: #22272b; max-width: 100% !important; border-bottom: 0.1px solid #fff; ">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="breadcrumb-box">
                    <h2>Bước 1: Chọn ghế</h2>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="feature-section padding-top-20 padding-bottom-5 container" style="background: #22272b; max-width: 100% !important; overflow-x: auto; ">
    <div class="screen-thumb">
        <h4 class="screen">Màn hình</h4>
        
        <img src="{% static 'seat/img/screen-thumb.png' %}" alt="movie">
    </div>
    <div class="list-seat" style="margin: 0 auto; width: 855px; position: relative; height: auto; ">
    <div class="clearfix row" style="position: relative; display: flex; justify-content: center;">
        {% for seat in seats %}
            {% if seat.id in booked_seats %}
                <!-- Ghế đã bán, không thể chọn -->
                <p style="margin: 3px; width: 35px; height: 35px; background-size: contain; color: #333; text-align: center; float: left; font-size: 0.6rem; line-height: 35px; letter-spacing: 0.5px; cursor: not-allowed;"
                class="seat"
                data-id="{{ seat.id }}"
                data-type="{{ seat.loai_ghe }}"
                data-price="{{ seat.gia_ve }}"
                style="background-image: url({% static 'seat/img/seat.png' %});">
                    {{ seat.ten_ghe }}
                </p>
            {% else %}
                <!-- Ghế có thể chọn -->
                <p style="margin: 3px; width: 35px; height: 35px; background-size: contain; color: #333; text-align: center; float: left; font-size: 0.6rem; line-height: 35px; letter-spacing: 0.5px; cursor: pointer;"
                class="seat"
                data-id="{{ seat.id }}"
                data-type="{{ seat.loai_ghe }}"
                data-price="{{ seat.gia_ve }}"
                onclick="onClickSelect(this)">
                    {{ seat.ten_ghe }}
                </p>
            {% endif %}
        {% endfor %}
    </div>
    </div>
    <div class="clearfix"></div>
    <section class="categories-section padding-top-20 padding-bottom-40 margin-bottom-10 container bg-main info-map" style="box-shadow: 0px -2px 5px 0px #333; position: fixed; width: 100%; border: 0; left: 0; right: 0; height: 140px; bottom: 0; background: #fff; max-width: 100% !important; z-index: 999; padding-top: 10px;">
        <div class="container">
            <div class="row ">
                <!-- section container view.-->
                <div class="col-lg-4">
                    <h5 style="margin-bottom: 15px; text-transform: uppercase; font-weight: 500; color: #444444; text-decoration: underline; background-image: url({% static 'seat/img/tag.png' %}); -webkit-background-size: 21px 6px; background-size: 21px 6px; background-position: left center; background-repeat: no-repeat; padding-left: 30px;">Chú thích ghế</h5>
                    <div class="note-color">
                        <div class="note-col"><p style="width: 20px; height: 20px; background: url({% static 'seat/img/seat-standard.png' %}) !important; background-size: contain !important;"></p><p> Ghế thường</p></div>
                        <div class="note-col"><p style="width: 20px; height: 20px; background: url({% static 'seat/img/seat-vip.png'%}) !important; background-size: contain !important;"></p><p> Ghế VIP</p></div>
                        <div class="note-col"><p style="width: 20px; height: 20px; background: url({% static 'seat/img/seat.png'%}) !important; background-size: contain !important;"></p><p> Ghế đã bán</p></div>
                        <div class="note-col"><p style="width: 20px; height: 20px; background: url({% static 'seat/img/seat-selected.png'%}) !important; background-size: contain !important;"></p><p> Ghế đang chọn</p></div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="col-lg-5 col-md-6 col-sm-12">
                    <div class="col-lg-12">
                        <h5 style="margin-bottom: 15px; text-transform: uppercase; font-weight: 500; color: #444444; text-decoration: underline; background-image: url({% static 'seat/img/tag.png' %}); -webkit-background-size: 21px 6px; background-size: 21px 6px; background-position: left center; background-repeat: no-repeat; padding-left: 30px;">Ghế đã chọn</h5>
                        <div class="note-color">
                            <div class="note-col"><p id="total_ticket" style="letter-spacing: 1px;font-size: 15px;"></p></div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="col-lg-12">
                        <h5 style="margin-bottom: 15px; text-transform: uppercase; font-weight: 500; color: #444444; text-decoration: underline; background-image: url({% static 'seat/img/tag.png' %}); -webkit-background-size: 21px 6px; background-size: 21px 6px; background-position: left center; background-repeat: no-repeat; padding-left: 30px;">Giá vé</h5>
                        <div class="note-color">
                            <div class="note-col"><p id="total_money" style="letter-spacing: 1px;font-size: 15px;">0</p></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12" style="align-items: center; display: flex;">
                    <div class="note-color">
                        <div class="note-col" style="width:100%"><a href="#" onclick="nextStep()" style="border-radius: 0;padding: 13px;background: #f37737;border-color: yellow;width: 70%;" class="btn btn-success">Tiếp theo</a></div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </section>

</div>

<script>
    // Đường dẫn hình ảnh cho ghế VIP, ghế Thường và ghế đã bán
    const vipSeatImageUrl = "{% static 'seat/img/seat-vip.png' %}";
    const standardSeatImageUrl = "{% static 'seat/img/seat-standard.png' %}";
    const selectedSeatImageUrl = "{% static 'seat/img/seat-selected.png' %}";
    const blackSeatImageUrl = "{% static 'seat/img/seat.png' %}";

    // Hàm để đặt hình nền cho ghế dựa trên loại ghế
    function setSeatBackgrounds() {
        const seats = document.querySelectorAll('.seat'); // Lấy tất cả các phần tử ghế
        seats.forEach(seat => {
            const seatType = seat.getAttribute('data-type'); // Lấy loại ghế
            const isBooked = seat.style.cursor === 'not-allowed'; // Kiểm tra nếu ghế đã bán

            if (isBooked) {
                // Ghế đã bán
                seat.style.backgroundImage = `url(${blackSeatImageUrl})`;
                seat.style.cursor = 'not-allowed'; // Đặt con trỏ chuột thành not-allowed
            } else if (seatType === "Ghế VIP") {
                // Ghế VIP
                seat.style.backgroundImage = `url(${vipSeatImageUrl})`;
            } else {
                // Ghế có thể chọn (không phải VIP hoặc đã bán)
                seat.style.backgroundImage = `url(${standardSeatImageUrl})`;
            }

            // Nếu ghế đã được chọn (có class 'selected')
            if (seat.classList.contains('selected')) {
                seat.style.backgroundImage = `url(${selectedSeatImageUrl})`;
            }
        });
    }

    // Hàm khi chọn ghế sẽ thay đổi thành ghế đã chọn
    function onClickSelect(element) {
        // Kiểm tra nếu ghế đã bán thì không cho phép chọn
        if (element.style.cursor === 'not-allowed') {
            return;
        }

        const isSelected = element.classList.toggle("selected");
        const seatName = element.innerText;
        const seatPrice = parseInt(element.getAttribute("data-price"));
        let selectedSeats = document.getElementById("total_ticket").innerText.split(", ").filter(Boolean);
        let totalMoney = parseInt(document.getElementById("total_money").innerText.replace(/[^0-9]/g, "")) || 0;

        if (isSelected) {
            selectedSeats.push(seatName);
            totalMoney += seatPrice;
        } else {
            selectedSeats = selectedSeats.filter(name => name !== seatName);
            totalMoney -= seatPrice;
        }

        document.getElementById("total_ticket").innerText = selectedSeats.join(", ");
        document.getElementById("total_money").innerText = totalMoney.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " VNĐ";

        const seatType = element.getAttribute('data-type');
        if (isSelected) {
            element.style.backgroundImage = `url(${selectedSeatImageUrl})`;
        } else {
            element.style.backgroundImage = seatType === "Ghế VIP" ? `url(${vipSeatImageUrl})` : `url(${standardSeatImageUrl})`;
        }
    }

    // Hàm xử lý bước tiếp theo
    function nextStep() {
        const selectedSeats = document.querySelectorAll(".seat.selected");
        if (selectedSeats.length === 0) {
            alert("Vui lòng chọn ít nhất một ghế.");
        } else {
            selectedSeats.forEach(seat => {
                seat.style.backgroundImage = `url(${blackSeatImageUrl})`;
            });
            const selectedSeatId = 1;
            setTimeout(() => {
                // Get selected seat IDs as an array of data-id values
                const selectedSeatIds = Array.from(selectedSeats).map(seat => seat.getAttribute("data-id"));

                // Retrieve phimId and xuatChieuId from Django template variables
                const phimId = "{{ phim.id }}";
                const xuatChieuId = "{{ xuat_chieu.id }}";

                // Join the selected seat IDs into a comma-separated string
                const gheNgoiIds = selectedSeatIds.join(',');

                // Construct the URL for navigation
                const url = `/comboselect/${phimId}/${xuatChieuId}/${gheNgoiIds}/`;

                // Redirect to the constructed URL
                window.location.href = url;

            }, 500);
        }
    }

    document.addEventListener("DOMContentLoaded", setSeatBackgrounds);
</script>

    

    <!-- Footer Start -->

<footer class="filmoja-footer-area">
    <div class="footer-top-area section_70">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-sm-6">
                    <div class="single-footer-widget">
                        <a href="#"><img src="{% static 'trangchu/Content/img/logo.png' %}" alt="footer logo" /></a>
                        
                        <div class="footer-contact">
                            <p>Support: <a href="#">support@starlight.vn</a></p>
                            <p>Hotline: <a href="tell:1900 1722">1900 1722</a></p>
                            <ul>
                                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                                <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                                <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                                <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="single-footer-widget">
                        <h3>Chính sách</h3>
                        <ul>
                                    <li><a href="chinh-sach/dieu-khoan-chung-1.html"><i class="fa fa-angle-double-right"></i>Điều khoản chung</a></li>
                                    <li><a href="chinh-sach/chinh-sach-thanh-toan-2.html"><i class="fa fa-angle-double-right"></i>Ch&#237;nh s&#225;ch thanh to&#225;n</a></li>
                                    <li><a href="chinh-sach/chinh-sach-giao-nhan-3.html"><i class="fa fa-angle-double-right"></i>Ch&#237;nh S&#225;ch Giao Nhận</a></li>
                                    <li><a href="chinh-sach/bao-mat-thong-tin-4.html"><i class="fa fa-angle-double-right"></i>Bảo Mật Th&#244;ng Tin</a></li>
                                    <li><a href="chinh-sach/kiem-hang-doi-tra-hoan-tien-5.html"><i class="fa fa-angle-double-right"></i>Kiểm H&#224;ng, đổi trả/ho&#224;n tiền</a></li>
                        </ul>
                    </div>
                </div>
               
                <div class="col-lg-4 col-sm-6">
                    <div class="single-footer-widget">
                        <h3>Download App</h3>
                        <div class="footer-app-box">
                            <p>Tải ngay ứng dụng đặt vé online cho dế yêu của bạn !</p>
                            <ul class="apps-list">
                                <li><a href="https://play.google.com/store/apps/details?id=com.kingprocompany.starlightcinemas"><img src="{% static 'seat/img/app-1.jpg' %}" alt="app image" /></a></li>
                                <li><a href="https://apps.apple.com/us/app/starlight-cinemas/id1588865280"><img src="{% static 'seat/img/app-2.jpg' %}" alt="app image" /></a></li>
                            </ul>
                            <ul class="apps-list">
                                <li><a href="http://online.gov.vn/Home/WebDetails/118483" target="_blank"><img alt="" title="" src="{% static 'seat/img/congthuong.png' %}"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <h3 style="color:#fff">CÔNG TY CỔ PHẦN ENTERTAINMENT 2020</h3>
            <p>
                Giấy chứng nhận đăng kí doanh nghiệp công ty cổ phần: 0402021264 đăng ký lần đầu ngày 03/01/2020
            </p>
            <p>
                Cơ quan cấp : Phòng Đăng ký kinh doanh - Sở kế hoạch và đầu tư Thành phố Đà Nẵng
            </p>
            <p>
                Địa chỉ: Tầng 4, Tòa nhà Nguyễn Kim, 46 Điện Biên Phủ, TP. Đà Nẵng, Việt Nam
            </p>
            <p style="color:#fff">
                Hotline (Đường dây nóng) : <a href="tel:19001722">19001722</a>
            </p>
        </div>
    </div>
    <div class="copyright-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="copyright-box">
                        <p>2024 © StarLight. All rights reserved - Design by <a href="https://kingpro.vn/">KingPro</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<section>
    <div id="mobile-menu">
        <ul>
            <li><a class="" href="index.html" style="background-color:#2b2b31;"><i class="fa fa-home"></i><br />Trang Chủ</a></li>
            <li><p onclick="toggleMBooking()" style="background-color: #2b2b31;"><i class="fa fa-ticket"></i><br /> Đặt V&#233;</p></li>
            <li><a class="" href="lich-chieu.html" style="background-color: #2b2b31;"><i class="fa fa-film"></i><br /> Lịch Chiếu</a></li>
            <li><a href="uu-dai.html" style="background-color: #2b2b31;"><i class="fa fa-gift"></i><br /> Ưu Đ&#227;i</a></li>
        </ul>
    </div>

</section>
<section>
    <div class="mobile-book">
        <select class="slMTheater" onchange="selectMServer(this)">
            <option value="0">Rạp</option>
        </select>
        <select class="slMFilm" onchange="selectMFilm(this)">
            <option value="0">Phim</option>
        </select>
        <select class="slMDate" onchange="selectMDate(this)">
            <option value="0">Ng&#224;y chiếu</option>
        </select>
        <select class="slMTime" onchange="selectMTime(this)">
            <option value="0">Suất chiếu</option>
        </select>
        <a id="btnMBooking" onclick="btnMBooking()">Mua V&#233; Ngay</a>
    </div>
</section>


<script>
    function logOutMenu() {
        $.ajax({
            url: "/MemberRegister/Logout",
            type: "POST",
            traditional: true,
            datatype: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (result) {
                //alert(result);
                if (result === "true" || result === true) {
                    location.href = "index.html";
                } else {
                }
            },
            error: function () {
                return false;
            }
        });
    }
</script>
<script>
    function toggleMBooking() {
        $(".mobile-book").toggleClass("show-mobile-book");
    }
</script>
<!-- Load Facebook SDK for JavaScript -->

    <div class="modal fade" id="adsImageModal" role="dialog" style="background: rgba(51, 51, 51, 0.46);">
        <div class="modal-dialog" style="width:95%;max-width:95%;margin:100px auto;">
            <!-- Modal content-->
            <div class="modal-content" style="    max-width: 640px;margin: 0 auto;">
                <div class="modal-body" style="padding:0">
                    <img id="adsImage" style="    border: 3px solid #000;border-radius: 3px;width:100%" src="../www.starlight.vn/Areas/Admin/Content/Fileuploads/images/POSTER/z2950019928727_f1e225b7c12d6c9e9cd4af710d7e685f.html" />
                </div>
            </div>
        </div>
    </div>
    <script src="Scripts/Style88a8?v=_f8__VSi4vuTzCN0MMHUM1jt_vaACvuT1VJNbzQ6qPY1"></script>

    <script src="{% static 'seat/js/film-script.js' %}"></script>
    
    
   
</body>

<!-- Mirrored from starlight.vn/dat-ve.html?film_name=THI%c3%8aN%20%c4%90%c6%af%e1%bb%9cNG%20QU%e1%ba%a2%20B%c3%81O%20(T18)&time_id=4f195f51-45db-45a1-8366-2028d1069e9a&date=05/11/2024&format=2D&room=03&image=https://starlight.vn/Areas/Admin/Content/Fileuploads/images/Poster2024/THIEN-DUONG-QUA-BAO.jpg&time=18:15&server_id=2 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 05 Nov 2024 01:37:17 GMT -->
</html>
